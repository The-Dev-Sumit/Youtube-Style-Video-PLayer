<!Doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guidance</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/ca4ae39440.js" crossorigin="anonymous"></script>
  <style>
    /* YT-like hide/show controls */
    .player:hover .controls,
    .player.paused .controls,
    .player.settings-active .controls {
      opacity: 1;
    }
    .controls {
      opacity: 0;
      transition: opacity 0.25s ease;
    }
    
.roboto-condensed-good {
  font-family: "Roboto Condensed", sans-serif;
  font-optical-sizing: auto;
  font-weight: 600;
  font-style: normal;
}
    /* --- CUSTOM RANGE INPUT STYLING --- */
    #progress {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 3px; 
      cursor: pointer;
      border-radius: 0;
      background: rgba(255,255,255,0.2);
      transition: height 0.1s ease;
    }

    /* Hover effect: Increase height */
    .group\/bar:hover #progress { height: 5px; }

    /* Thumb Styling */
    #progress::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 12px;
      height: 12px;
      background: #ff0000;
      border-radius: 50%;
      margin-top: -3.5px; 
      transform: scale(0); 
      transition: transform 0.1s;
    }

    .group\/bar:hover #progress::-webkit-slider-thumb { transform: scale(1); }
    #progress:active::-webkit-slider-thumb { transform: scale(1.3); }

    #progress::-webkit-slider-runnable-track {
      background: transparent;
      height: 100%;
      border: none;
    }

    /* Settings Menu Animation */
    #settingsMenu {
        transition: all 0.2s ease;
        transform-origin: bottom right;
    }
    .hidden-menu {
        opacity: 0;
        transform: scale(0.9);
        pointer-events: none;
    }
    .visible-menu {
        opacity: 1;
        transform: scale(1);
        pointer-events: auto;
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Allan:wght@400;700&family=Anton+SC&family=Aref+Ruqaa+Ink:wght@400;700&family=Bebas+Neue&family=Bungee+Spice&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=DM+Serif+Text:ital@0;1&family=Days+One&family=Delius+Unicase:wght@400;700&family=Eagle+Lake&family=Fira+Mono:wght@400;500;700&family=Ga+Maamli&family=Lemon&family=Lemonada:wght@300..700&family=Momo+Trust+Display&family=Poetsen+One&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Righteous&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Rowdies:wght@300;400;700&family=Rubik+Glitch&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Winky+Rough:ital,wght@0,300..900;1,300..900&family=Yatra+One&display=swap" rel="stylesheet">
</head>
<body class="bg-neutral-900 text-white flex flex-col gap-20 items-center min-h-screen">
    <div class="w-full bg-red-600  px-4 sm:px-4 lg:px-10">
  <div class="h-16 w-full flex flex-row justify-between sm:flex-row items-center sm:justify-between space-x-5">
    <span class="flex items-center justify-center space-x-3">
      <h1 class="text-lg sm:text-xl lg:text-2xl roboto-condensed-good">
        YouTube Mere
      </h1>
      <img
        title="lode pe"
        class="h-10 w-10 sm:h-12 sm:w-12 lg:h-14 lg:w-14 rounded-full object-cover"
        src="https://res.cloudinary.com/dmmzqpfgg/image/upload/v1765281662/Screenshot_2025-12-09_172917_vntkhv.png"
        alt="Lode pe"
      >
    </span>
    <span class="flex items-center justify-center mt-1 sm:mt-0">
      <h1 class="text-sm sm:text-lg lg:text-2xl text-center roboto-condensed-good">
        The Great Sumit For A Reason
      </h1>
    </span>

  </div>
</div>


  <div id="playerContainer" class="w-full max-w-4xl player relative group rounded-xl overflow-hidden bg-black aspect-video flex items-center">
    
    <video id="video" class="w-full h-full object-contain" crossorigin="anonymous" 
      src="https://res.cloudinary.com/dmmzqpfgg/video/upload/v1750228307/Uivora_Promotional_Video_e3sasw.mp4">
    </video>

    <div id="loader" class="absolute inset-0 m-auto w-16 h-16 border-4 border-white/20 border-t-red-600 rounded-full animate-spin hidden z-0 pointer-events-none"></div>

    <div id="rippleLeft" class="absolute top-0 left-0 bottom-0 w-1/3 flex items-center justify-center bg-white/10 opacity-0 pointer-events-none transition-opacity duration-300 z-10">
        <div class="flex flex-col items-center text-white">
            <i class="fa-solid fa-backward text-3xl mb-1"></i>
            <span class="text-xs font-bold">-10s</span>
        </div>
    </div>

    <div id="rippleRight" class="absolute top-0 right-0 bottom-0 w-1/3 flex items-center justify-center bg-white/10 opacity-0 pointer-events-none transition-opacity duration-300 z-10">
        <div class="flex flex-col items-center text-white">
            <i class="fa-solid fa-forward text-3xl mb-1"></i>
            <span class="text-xs font-bold">+10s</span>
        </div>
    </div>

    <button title="play" id="bigPlay"
      class="absolute inset-0 m-auto w-20 h-20 flex items-center justify-center 
             bg-black/50 rounded-full text-4xl cursor-pointer z-10 transition hover:bg-black/70">
      <i class="fa-solid fa-play ml-1"></i>
    </button>

    <div id="settingsMenu" class="hidden-menu absolute bottom-16 right-4 bg-black/90 text-white p-2 rounded-lg border border-white/10 w-48 z-40 shadow-xl backdrop-blur-sm font-sans text-sm">
        <div class="px-3 py-2 border-b border-white/10 font-bold mb-1 text-gray-400">Quality</div>
        <button onclick="changeQuality('1080p')" class="w-full text-left px-3 py-2 hover:bg-white/20 rounded flex justify-between">
            <span>1080p HD</span> <span id="check-1080p" class="text-red-500 opacity-0">✓</span>
        </button>
        <button onclick="changeQuality('720p')" class="w-full text-left px-3 py-2 hover:bg-white/20 rounded flex justify-between">
            <span>720p</span> <span id="check-720p" class="text-red-500 opacity-0">✓</span>
        </button>
        <button onclick="changeQuality('480p')" class="w-full text-left px-3 py-2 hover:bg-white/20 rounded flex justify-between">
            <span>480p</span> <span id="check-480p" class="text-red-500 opacity-0">✓</span>
        </button>
        <button onclick="changeQuality('360p')" class="w-full text-left px-3 py-2 hover:bg-white/20 rounded flex justify-between">
            <span>360p</span> <span id="check-360p" class="text-red-500 opacity-0">✓</span>
        </button>
    </div>

    <div class="controls absolute bottom-0 left-0 right-0 
                bg-gradient-to-t from-black/90 via-black/60 to-transparent pt-10 pb-2 px-3 space-y-2 z-20">

      <div id="progressContainer" class="relative w-full h-auto flex items-end group/bar py-2 cursor-pointer">
          
          <div id="previewTooltip" class="absolute bottom-8 left-0 hidden flex-col items-center bg-black p-1 rounded border border-white/20 shadow-xl z-30 pointer-events-none transform -translate-x-1/2 mb-2">
              <canvas id="previewCanvas" width="160" height="90" class="rounded bg-gray-800 mb-1"></canvas>
              <div id="previewTime" class="text-xs font-bold font-sans text-center">0:00</div>
          </div>

          <input title="video progress" id="progress" type="range" value="0" min="0" max="100" step="0.1"
          class="w-full z-20 relative">
      </div>

      <div class="flex items-center justify-between text-sm font-medium">
        <div class="flex items-center gap-4">
          <button title="play & pause" id="playPause" class="text-xl w-6 hover:text-gray-300"><i class="fa-solid fa-play ml-1"></i></button>
          
           <button title="backward" id="back10" class="hover:text-gray-300"><i class="fa-solid fa-angles-left"></i></button>
           <button title="forward" id="forward10" class="hover:text-gray-300"><i class="fa-solid fa-angles-right"></i></button>

          <div class="flex items-center gap-2 group/vol">
             <i class="fa-solid fa-volume-high"></i>
             <input title="volume meter" id="volume" type="range" min="0" max="1" step="0.05" value="1"
              class="w-20 h-1 accent-white cursor-pointer">
          </div>

          <div id="time" class="text-xs text-gray-300 tabular-nums">0:00 / 0:00</div>
        </div>

        <div class="flex items-center gap-4">
            <button title="Setting button" id="settingsBtn" class="hover:text-white text-gray-300 transition transform hover:rotate-45"><i class="fa-solid fa-gear"></i></button>
            <button id="fullScreenBtn" title="fullscreen button" class="hover:text-white text-gray-300"><i class="fa-solid fa-expand"></i></button>
        </div>
      </div>
    </div>
  </div>

  <script>
    //  ELEMENTS 
    const video = document.getElementById("video");
    const playPause = document.getElementById("playPause");
    const progress = document.getElementById("progress");
    const volume = document.getElementById("volume");
    const time = document.getElementById("time");
    const bigPlay = document.getElementById("bigPlay");
    const playerContainer = document.getElementById("playerContainer"); 
    const fullScreenBtn = document.getElementById("fullScreenBtn");
    const settingsBtn = document.getElementById("settingsBtn"); 
    const settingsMenu = document.getElementById("settingsMenu"); 
    const loader = document.getElementById("loader");
    const rippleLeft = document.getElementById("rippleLeft");
    const rippleRight = document.getElementById("rippleRight");
    
    // Preview Elements
    const progressContainer = document.getElementById("progressContainer");
    const previewTooltip = document.getElementById("previewTooltip");
    const previewCanvas = document.getElementById("previewCanvas");
    const previewTime = document.getElementById("previewTime");
    const ctx = previewCanvas.getContext("2d");

    // GHOST VIDEO SETUP
    const ghostVideo = document.createElement("video");
    ghostVideo.src = video.src; 
    ghostVideo.muted = true;
    ghostVideo.preload = "auto";
    ghostVideo.crossOrigin = "anonymous";

    let isDragging = false;

    function format(sec) {
      if (!sec) return "0:00";
      const m = Math.floor(sec / 60);
      const s = Math.floor(sec % 60).toString().padStart(2, "0");
      return `${m}:${s}`;
    }

    function togglePlay() {
      if (video.paused) video.play();
      else video.pause();
    }

    //  COLOR UPDATE FUNCTION 
    function updateProgressBackground(value) {
      const percent = value !== undefined ? value : ((progress.value - progress.min) / (progress.max - progress.min) * 100);
      progress.style.background = `linear-gradient(to right, #ff0000 ${percent}%, rgba(255, 255, 255, 0.2) ${percent}%)`;
    }

    //  VIDEO EVENTS 
    video.addEventListener("loadedmetadata", () => {
        time.textContent = `0:00 / ${format(video.duration)}`;
        updateProgressBackground(0);
    });

    video.addEventListener("timeupdate", () => {
      if (!isDragging) {
        const c = video.currentTime;
        const d = video.duration || 0;
        time.textContent = `${format(c)} / ${format(d)}`;
        const percent = (c / d) * 100 || 0;
        progress.value = percent;
        updateProgressBackground(percent);
      }
    });

    playerContainer.addEventListener("dblclick", (e) => {
        // Agar user ne Controls par click kiya hai to ignore karo
        if (e.target.closest(".controls")) return;

        const rect = playerContainer.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const width = rect.width;

        // RIGHT SIDE (Skip Forward) -> Agar click right ke 35% hisse me hai
        if (clickX > width * 0.65) {
            video.currentTime += 10;
            animateRipple(rippleRight);
        } 
        // LEFT SIDE (Skip Backward) -> Agar click left ke 35% hisse me hai
        else if (clickX < width * 0.35) {
            video.currentTime -= 10;
            animateRipple(rippleLeft);
        }
        // CENTER: Double click in center usually toggles Fullscreen (Optional)
        else {
           // Agar center me double click par fullscreen chahiye to ye uncomment karo:
           // fullScreenBtn.click();
        }
    });

    // Animation Function
    function animateRipple(element) {
        // 1. Show
        element.style.opacity = "1";
        element.style.transform = "scale(1.2)"; // Thoda bada karo
        
        // 2. Hide after 500ms
        setTimeout(() => {
            element.style.opacity = "0";
            element.style.transform = "scale(1)";
        }, 500);
    }

    //  FULLSCREEN LOGIC 
    fullScreenBtn.addEventListener("click", () => {
        if (!document.fullscreenElement) {
            playerContainer.requestFullscreen().catch(err => {
                console.log(`Error: ${err.message}`);
            });
            fullScreenBtn.innerHTML = '<i class="fa-solid fa-compress"></i>';
        } else {
            document.exitFullscreen();
            fullScreenBtn.innerHTML = '<i class="fa-solid fa-expand"></i>';
        }
    });

    document.addEventListener("fullscreenchange", () => {
        if (!document.fullscreenElement) {
            fullScreenBtn.innerHTML = '<i class="fa-solid fa-expand"></i>';
        }
    });

    //  SETTINGS MENU 
    settingsBtn.addEventListener("click", (e) => {
        e.stopPropagation(); 
        const isHidden = settingsMenu.classList.contains("hidden-menu");
        if (isHidden) {
            settingsMenu.classList.remove("hidden-menu");
            settingsMenu.classList.add("visible-menu");
            playerContainer.classList.add("settings-active");
        } else {
            closeSettings();
        }
    });

    function closeSettings() {
        settingsMenu.classList.add("hidden-menu");
        settingsMenu.classList.remove("visible-menu");
        playerContainer.classList.remove("settings-active");
    }

    window.addEventListener("click", (e) => {
        if (!settingsMenu.contains(e.target) && e.target !== settingsBtn) {
            closeSettings();
        }
    });

    // Jab video data load kar raha ho (Waiting) -> Show Loader
    video.addEventListener("waiting", () => {
        loader.classList.remove("hidden");
    });

    // Jab video chalne lage (Playing) -> Hide Loader
    video.addEventListener("playing", () => {
        loader.classList.add("hidden");
    });

    // Jab user seek kare (Seeking) -> Show Loader
    video.addEventListener("seeking", () => {
        if(!video.paused) loader.classList.add("hidden");
    });

    // Jab seek complete ho jaye -> Hide Loader
    video.addEventListener("seeked", () => {
        // Agar video pause nahi hai to loader hatao
        if(!video.paused) loader.classList.add("hidden");
    });

    // QUALITY CHANGE LOGIC 
    window.changeQuality = function(quality) {
        document.querySelectorAll("[id^='check-']").forEach(el => el.style.opacity = "0");
        document.getElementById(`check-${quality}`).style.opacity = "1";
        
        const currentTime = video.currentTime;
        const wasPaused = video.paused;
        
        
        let newUrl = "";
        
        if (quality === '1080p') {
            newUrl = 'https://res.cloudinary.com/dmmzqpfgg/video/upload/v1750228307/Uivora_Promotional_Video_e3sasw.mp4'; 
        } else if (quality === '720p') {
            newUrl = 'https://res.cloudinary.com/dmmzqpfgg/video/upload/v1765277904/Uivora_Promotional_Video_720p_ifbikg.mp4';
        } else if (quality === '480p') {
            newUrl = 'https://res.cloudinary.com/dmmzqpfgg/video/upload/v1765278020/Uivora_Promotional_Video_480p_ldsrqn.mp4';
        } else if (quality === '360p') {
            newUrl = 'https://res.cloudinary.com/dmmzqpfgg/video/upload/v1765278894/Uivora_Promotional_Video_360p_xj0zzm.mp4';
        }

        loader.classList.remove("hidden");

        video.src = newUrl;
        ghostVideo.src = newUrl; 
        
        video.currentTime = currentTime;
        video.oncanplay = () => {
            if (!wasPaused) video.play();
            // Note: Loader 'playing' event se apne aap hat jayega
            video.oncanplay = null; // Clean up listener
        };
        
        closeSettings();
    };

    // Initialize Checkmark
    document.getElementById("check-1080p").style.opacity = "1";

    // --- HOVER PREVIEW & DRAG ---
    progressContainer.addEventListener("mousemove", (e) => {
      const rect = progressContainer.getBoundingClientRect();
      const pos = (e.clientX - rect.left) / rect.width; 
      const hoverTime = Math.max(0, Math.min(pos * video.duration, video.duration));

      previewTooltip.classList.remove("hidden");
      previewTooltip.classList.add("flex");
      
      let tooltipX = e.clientX - rect.left;
      if(tooltipX < 80) tooltipX = 80; 
      if(tooltipX > rect.width - 80) tooltipX = rect.width - 80; 
      previewTooltip.style.left = `${tooltipX}px`;
      
      previewTime.textContent = format(hoverTime);

      if (Number.isFinite(hoverTime)) {
         ghostVideo.currentTime = hoverTime;
      }
    });

    ghostVideo.addEventListener("seeked", () => {
        ctx.drawImage(ghostVideo, 0, 0, previewCanvas.width, previewCanvas.height);
    });

    progressContainer.addEventListener("mouseleave", () => {
      previewTooltip.classList.add("hidden");
      previewTooltip.classList.remove("flex");
    });

    const startDrag = () => { isDragging = true; };
    const endDrag = () => { isDragging = false; };

    progress.addEventListener("mousedown", startDrag);
    progress.addEventListener("touchstart", startDrag);
    progress.addEventListener("mouseup", endDrag);
    progress.addEventListener("touchend", endDrag);

    progress.addEventListener("input", () => {
      const percent = progress.value;
      updateProgressBackground(percent);
      const seekTime = (percent / 100) * video.duration;
      time.textContent = `${format(seekTime)} / ${format(video.duration)}`;
      video.currentTime = seekTime;
    });

    // --- CONTROLS ---
    volume.addEventListener("input", () => { video.volume = volume.value; });

    video.addEventListener("play", () => {
      bigPlay.style.display = "none";
      playPause.innerHTML = "<i class='fa-solid fa-pause'></i>";
      playerContainer.classList.remove("paused");
    });

    video.addEventListener("pause", () => {
      bigPlay.style.display = "flex";
      playPause.innerHTML = "<i class='fa-solid fa-play ml-1'></i>";
      playerContainer.classList.add("paused");
    });

    playPause.onclick = togglePlay;
    bigPlay.onclick = togglePlay;
    video.onclick = togglePlay;
    
    document.getElementById("back10").onclick = (e) => { e.stopPropagation(); video.currentTime -= 10; };
    document.getElementById("forward10").onclick = (e) => { e.stopPropagation(); video.currentTime += 10; };

    // --- KEYBOARD SHORTCUTS ---
    document.addEventListener("keydown", (e) => {
        // Agar focus kisi input par nahi hai tabhi kaam kare
        if (e.target.tagName === "INPUT") return;

        switch(e.key) {
            case "ArrowLeft":
                video.currentTime -= 10;
                break;
            case "ArrowRight":
                video.currentTime += 10;
                break;
            case " ": // Spacebar se Play/Pause (Bonus)
                e.preventDefault(); // Page scroll hone se rokne ke liye
                togglePlay();
                break;
        }
    });

  </script>

</body>
</html>